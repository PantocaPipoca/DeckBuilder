### Test DeckBuilder API
### Use the REST Client extension in VS Code to run these requests

@baseUrl = http://localhost:4000
@apiUrl = {{baseUrl}}/api

### 1. Health Check
GET {{baseUrl}}/health

### 2. Get all cards (first, let's see what cards we have)
GET {{apiUrl}}/cards

### 3. List all decks (should be empty initially)
GET {{apiUrl}}/decks

### 4. Create a new deck with 8 cards
# Note: Use card names instead of IDs
POST {{apiUrl}}/decks
Content-Type: application/json

{
  "name": "Meta Deck 2023",
  "description": "Melhor deck do universo love pekka",
  "cardNames": ["Mini P.E.K.K.A.", "P.E.K.K.A", "Mirror", "Minion Horde", "Cannon", "Arrows", "Executioner", "Vines"],
  "isPublic": true,
  "ownerId": 1
}

### 5. Create another deck - Giant Beatdown
POST {{apiUrl}}/decks
Content-Type: application/json

{
  "name": "Giant Beatdown",
  "description": "Deck de ataque pesado com Giant e suporte",
  "cardNames": ["Giant", "Witch", "Mini P.E.K.K.A", "Mega Minion", "Zap", "The Log", "Elixir Collector", "Tombstone"],
  "isPublic": true,
  "ownerId": 1
}

### 6. Get a specific deck by ID
# Replace :id with actual deck ID
GET {{apiUrl}}/decks/1

### 7. Update a deck
# Replace :id with actual deck ID
PUT {{apiUrl}}/decks/1
Content-Type: application/json

{
  "name": "Meta Deck 2023 - Updated",
  "description": "Deck melhorado com melhor sinergia"
}

### 8. Update deck cards
PUT {{apiUrl}}/decks/1
Content-Type: application/json

{
  "cardNames": ["Golem", "Night Witch", "Baby Dragon", "Tornado", "Lightning", "Mega Minion", "Lumberjack", "The Log"]
}

### 9. Like a deck
POST {{apiUrl}}/decks/1/like

### 10. Get deck stats
GET {{apiUrl}}/decks/1/stats

### 11. Filter only public decks
GET {{apiUrl}}/decks?onlyPublic=true

### 12. Delete a deck
# Replace :id with actual deck ID
DELETE {{apiUrl}}/decks/2

### ============================================
### ERROR TESTING - These should fail
### ============================================

### ERROR 1: Try to create deck with wrong number of cards (should fail)
POST {{apiUrl}}/decks
Content-Type: application/json

{
  "name": "Invalid Deck",
  "cardNames": ["Knight", "Archers", "Fireball", "Zap", "Hog Rider"],
  "isPublic": true,
  "ownerId": 1
}

### ERROR 2: Try to create deck with duplicate cards (should fail)
POST {{apiUrl}}/decks
Content-Type: application/json

{
  "name": "Duplicate Cards Deck",
  "cardNames": ["Knight", "Knight", "Knight", "Knight", "Knight", "Knight", "Knight", "Knight"],
  "isPublic": true,
  "ownerId": 1
}

### ERROR 3: Try to create deck with invalid card names (should fail)
POST {{apiUrl}}/decks
Content-Type: application/json

{
  "name": "Invalid Names Deck",
  "cardNames": ["Fake Card 1", "Fake Card 2", "Fake Card 3", "Fake Card 4", "Fake Card 5", "Fake Card 6", "Fake Card 7", "Fake Card 8"],
  "isPublic": true,
  "ownerId": 1
}

### ERROR 4: Try to get non-existent deck (should return 404)
GET {{apiUrl}}/decks/99999
